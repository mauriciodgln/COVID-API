const contenedor=document.querySelector(".contenedor"),resultado=document.querySelector(".resultado"),formulario=document.querySelector("#formulario");let paises=document.querySelector("#pais"),ciudades=document.querySelector("#ciudad");const btnBuscar=document.querySelector("#btnBuscar"),inputBuscar=document.querySelector("#buscar"),navegacion=document.querySelector(".navegacion"),navMobile=document.querySelector(".nav-mobile");function obtenerDatosPais(){fetch("https://covid-api.mmediagroup.fr/v1/cases").then(e=>e.json()).then(e=>{let t="<option disabled selected value> -- Selecciona el País -- </option>";for(const[o]of Object.entries(e))t+=`<option> ${o} </option>`;paises.innerHTML=t}),paises.addEventListener("change",()=>{obtenerDatosCiudad()})}function obtenerDatosCiudad(){const e=paises.value;fetch("https://covid-api.mmediagroup.fr/v1/cases?country="+e).then(e=>e.json()).then(e=>{let t="";for(const[o]of Object.entries(e))t+=`<option> ${o} </option>`;ciudades.innerHTML=t})}function solicitarDatos(e){e.preventDefault();const t=paises.value;""!==t?consultarAPI(t):mostrarError("El país es obligatorio")}function mostrarError(e){if(!document.querySelector("#error")){const t=document.createElement("div");t.classList.add("error"),t.setAttribute("id","error"),t.innerHTML=`\n      <strong>Error!</strong>\n      <p>${e}</p>\n    `,contenedor.appendChild(t),setTimeout(()=>{t.remove()},5e3)}}function consultarAPI(e){const t="https://covid-api.mmediagroup.fr/v1/cases?country="+e;spinner(),setTimeout(()=>{limpiarHTML(),fetch(t).then(e=>e.json()).then(e=>buscarDatos(e))},2e3)}function buscarDatos(e){const t=ciudades.value;for(const[o,n]of Object.entries(e))t===o&&mostrarDatos(o,n)}function mostrarDatos(e,t){const{confirmed:o,deaths:n,updated:a}=t,s=paises.value,i=document.querySelector("#respuestaAPI"),r=document.createElement("p");if(r.classList.add("datos"),r.innerHTML="All"===e?"Ubicación: "+s:`Ubicación: ${e}, ${s}`,!i){const e=document.createElement("div");e.setAttribute("id","respuestaAPI");const t=document.createElement("p");t.classList.add("datos"),t.innerHTML="Casos confirmados: "+o;const s=document.createElement("p");s.classList.add("datos"),s.innerHTML="Muertes: "+n;const i=document.createElement("p");i.classList.add("datos"),i.innerHTML=void 0===a?"Ultima actualización: No disponible":"Ultima actualización: "+a,e.appendChild(r),e.appendChild(t),e.appendChild(s),e.appendChild(i),resultado.appendChild(e)}}function limpiarHTML(){for(;resultado.firstChild;)resultado.removeChild(resultado.firstChild)}function spinner(){limpiarHTML();const e=document.createElement("p");e.classList.add("datos"),e.innerHTML="Buscando...",resultado.appendChild(e)}function desplegarMenu(){efectoNavMobile(),navegacion.classList.toggle("activo")}function efectoNavMobile(){navMobile.classList.toggle("activo")}function borrarClases(){window.innerWidth>768&&(navegacion.classList.remove("activo"),navMobile.classList.remove("activo"),inputBuscar.classList.remove("activo"))}function desplegarBuscador(e){e.preventDefault(),window.innerWidth<768&&inputBuscar.classList.toggle("activo")}window.addEventListener("load",()=>{obtenerDatosPais(),formulario.addEventListener("submit",solicitarDatos),navMobile.addEventListener("click",desplegarMenu),window.addEventListener("resize",borrarClases),btnBuscar.addEventListener("click",desplegarBuscador)});
//# sourceMappingURL=script.js.map
